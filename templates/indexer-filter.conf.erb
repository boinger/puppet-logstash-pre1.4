
# mind that we're now using our own patterns_dir which is managed by puppet

filter {

  # http://logstash.net/docs/1.1.13/filters/grok
  # grok {
  #    type              => "syslog"
  #    match             => [ "wtf" ]
  #    patterns_dir      => [ "/etc/logstash/grok_patterns" ]
  #    pattern           => ??????
  #    add_tag           => 'wtf'
  #    add_field         => [ "wtf", "%{@message}" ]
  #    break_on_match    => true
  #    named_captures_only => true
  # }

  # grep notes?
  # kv notes?

  grep {
    match  => [ "@message", "dhclient" ]
    negate => true
  }

  kv {
    type        => "applog"
    field_split => "^"
    value_split => ":"
  }

  grok {
    match => ["@source_path", "/var/log/messages"]
    patterns_dir => ["/etc/logstash/grok_patterns"]
    pattern => "%{SYSLOGLINE}"
  }

  # grok {
  #   type                => "syslog"
  #   patterns_dir        => [ "/etc/logstash/grok_patterns" ]
  #   pattern             => "%{SYSLOGLINE}"
  #   break_on_match      => true
  #   #named_captures_only => true
  # }

  # grok {
  #   type                => "apache-access"
  #   patterns_dir        => [ "/etc/logstash/grok_patterns" ]
  #   pattern             => "%{COMBINEDAPACHELOG}"
  #   break_on_match      => true
  #   named_captures_only => true
  # }

  # date {
  #   type => "syslog"
  #   match => [ "logdate", "MMM dd YYY HH:mm:ss", "MMM  d YYY HH:mm:ss", "ISO8601" ]
  # }
  # date {
  #   type	=> "apache-access"
  #   match => [ "logdate", "dd/MMM/yyyy:HH:mm:ss Z" ]
  # }
}
